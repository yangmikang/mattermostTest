<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
   response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1
   response.setHeader("Pragma", "no-cache"); // HTTP 1.0
   response.setDateHeader("Expires", 0); // Proxies
%>
<%@ include file="/WEB-INF/jsp/cmmn/tagLib.jsp" %>
<!-- 헤더 영역 -->
		<header id="header">
			<!-- 헤더 컨텐츠 영역  -->
			<div class="header-in">
				<!-- 헤더 상단 기타메뉴 -->
				<div class="head-body">
					<div class="inner">
						<div class="head-in">
							<h1 class="logo">
								<a href="${pageContext.request.contextPath}/index.do">
									<img src="${pageContext.request.contextPath}/img/pattern/layout/head_logo.svg" class="logo-im" alt="Global Innopolis Network Initiative">
									<!-- <img src="${pageContext.request.contextPath}/img/pattern/layout/head_logo_slogan.svg" class="logo-slogan" alt="다시 대한민국! 새로운 국민의 나라"> -->
								</a>
							</h1>
							
							<!-- 웹 : 메뉴 영역 -->
							<nav class="krds-gnb new">
								<div class="inner">
									<ul class="gnb-menu menu-1depth">
										<li>  
											<button>About GINI</button>
										</li>
										<li>
											<button>Network</button>
										</li>
										<li>
											<button>Programs</button>
										</li>
										<li>
											<button>News</button>
										</li>
										<li>
											<button>Member's Area</button>
										</li>
									</ul>
									<!-- 한번에 보이는 2뎁스 -->
									<div class="menu-drop">
										<div class="inner">
											<div class="menu-title">
												<strong class="ico-gini">About GINI</strong>
											</div>
											<div class="menu-cont">
												<div class="menu-2depth-box">
													<ul class="menu-2depth">
														<div class="depth-order-1">
															<c:forEach items="${menuList }" var="list"> 
																<c:if test="${list.board_order_group == '1' }">
																	<li><a href="${pageContext.request.contextPath}${list.board_link}">${list.board_master_name }</a></li>
																</c:if>
															</c:forEach>
														</div>
														<div class="depth-order-2">
															<c:forEach items="${menuList }" var="list">
																<c:if test="${list.board_order_group == '2' }">
																	<li><a href="${pageContext.request.contextPath}${list.board_link}">${list.board_master_name }</a></li>
																</c:if>
															</c:forEach>	
														</div>
														<div class="depth-order-3">
															<c:forEach items="${menuList }" var="list">
																<c:if test="${list.board_order_group == '3' }">
																	<li><a href="${pageContext.request.contextPath}${list.board_link}">${list.board_master_name }</a></li>
																</c:if>
															</c:forEach>	
														</div>
														<div class="depth-order-4">
															<c:forEach items="${menuList }" var="list">
																<c:if test="${list.board_order_group == '4' }">
																	<li><a href="${pageContext.request.contextPath}${list.board_link}">${list.board_master_name }</a></li>
																</c:if>
															</c:forEach>	
														</div>
														<div class="depth-order-5">
															<c:forEach items="${menuList }" var="list">
																<c:if test="${list.board_order_group == '5' }">
																	<li><a href="${pageContext.request.contextPath}${list.board_link}">${list.board_master_name }</a></li>
																</c:if>
															</c:forEach>  
														</div>
													</ul>
												</div>
											</div>
										</div>
									</div>									
									<!-- //한번에 보이는 2뎁스 -->
								</div>
							</nav>
							<!-- //웹 : 메뉴 영역 -->
							<div class="right ">
									<!-- <button type="button" class="btn-navi sch" title="통합검색 레이어" onclick="common.popupEvent('#popTotalSch');">통합검색</button> -->
								<div class="krds-drop-wrap my-drop drop-language">
									  <button type="button" class="btn-navi language drop-btn">Language<span class="sr-only">열기</span></button>
									  <div class="drop-menu">
									    <div class="drop-in">
									    	<div class="drop-top-info">
												<p class="drop-info">Translate this page using your browser.</p>
											</div>
										    <ul class="drop-list">
										      <li><a href="#" data-lang="en" class="lang-option item-ico ico-eng">English</a></li>
										      <li><a href="#" data-lang="ko" class="lang-option item-ico ico-kor">Korean</a></li>
										      <li><a href="#" data-lang="de" class="lang-option item-ico ico-de">German</a></li>
										      <li><a href="#" data-lang="es" class="lang-option item-ico ico-es">Spanish</a></li>
										      <li><a href="#" data-lang="fr" class="lang-option item-ico ico-fr">French</a></li>
										    </ul>
									    </div>
									  </div>
									</div>
									<div id="google_translate_element" style="position:absolute; left:-9999px;"></div>
								<c:if test="${empty sessionScope.loggedInUser}">  
								<a href="#" class="btn-navi login" onclick="location.href='${pageContext.request.contextPath}/login.do'">Login</a>
								<button type="button" class="btn-navi join" onclick="location.href='${pageContext.request.contextPath}/userRegister.do'">Join</button>
								</c:if>
								<c:if test="${not empty sessionScope.loggedInUser}">
									<a href="#" class="btn-navi logout" onclick="location.href='${pageContext.request.contextPath}/logout.do'">Logout</a>
									<c:if test="${sessionScope.loggedInUser.role ne 'A'}">
										<a href="#" class="btn-navi my" onclick="location.href='${pageContext.request.contextPath}/editUser.do'">MyPage</a>
									</c:if>
									</c:if>
								<!-- 관리자 로그인을 한 경우에만 노출, 멤버 회원도 마이페이지 필요한지 모르겠음 --> 
									<c:if test="${sessionScope.loggedInUser.role eq 'A'}">
										<div class="krds-drop-wrap my-drop">
											<button type="button" class="btn-navi admin drop-btn">Admin<span class="sr-only">열기</span></button>
											<div class="drop-menu">
												<div class="drop-in">
													<div class="drop-top-info">
														<p class="my-name">${sessionScope.loggedInUser.username}</p>
														<!-- 세션이 필요한 경우 사용 -->
														<!-- <dl class="my-time">
															<dt>로그아웃까지 남은 시간</dt>
															<dd>
																<span class="time">30:00</span>
																<button type="button" class="btn sm btn-txt">시간 연장</button>
															</dd>
														</dl> -->
														<!-- //세션이 필요한 경우 사용 -->
													</div>
													<ul class="drop-list">
														<li><a href="#" class="item-link ico-go" onclick="location.href='${pageContext.request.contextPath}/editUser.do'">My Page</a></li>
														<li><a href="#" class="item-link ico-go" onclick="location.href='${pageContext.request.contextPath}/admin.do'">User Management</a></li>
														<li><a href="#" class="item-link ico-go" onclick="location.href='${pageContext.request.contextPath}/adminBoard.do'">Board Permission Management</a></li>
													</ul>
<!-- 													<div class="drop-btm-btn"> -->
<!-- 														<button type="button" class="btn sm btn-txt ico-log ico-before">로그아웃</button> -->
<!-- 													</div> -->
												</div>
											</div>
										</div>
									</c:if>
									<!-- //관리자 로그인을 한 경우에만 노출 -->
								<button type="button" class="btn-navi all" aria-controls="mobile-nav" aria-expanded="false">전체메뉴</button>
							</div>
						</div>
					</div>
				</div>
				<!-- //헤더 상단 기타메뉴 -->
			</div>
			<!-- //헤더 컨텐츠 영역  -->
			
			
		</header>
		<!-- //헤더 영역 -->
<script>
		/* layer : 검색필터 */
		const $tag = document.querySelector(".pop-filter-top .tag-in");
		const $tagBtn = document.querySelector(".pop-filter-top #btn-toggle");
		if ($tagBtn) {
			$tagBtn.addEventListener("click", (e) => {
				if (!e.target.classList.contains("active")) {
					$tag.classList.add("is-open");
					e.target.classList.add("active");
				} else {
					$tag.classList.remove("is-open");
					e.target.classList.remove("active");
				}
			});
		}
	</script>

	<script>
    document.addEventListener('DOMContentLoaded', function () {
		const calendarEl = document.getElementById('calendar');

		const calendar = new FullCalendar.Calendar(calendarEl, {
			locale: 'en',               // 한국어
			initialView: 'dayGridMonth',
			selectable: true,          // 드래그 또는 클릭으로 선택 허용
			editable: true,            // 드래그로 이동/수정 가능
			headerToolbar: {
			// left: 'timeGridDay', //dayGridMonth,timeGridWeek
			left: 'title',
			right: 'prev,today,next'
			},

			// 날짜 클릭 → 새 이벤트 생성
			dateClick: function (info) {
			const title = prompt('일정 제목을 입력하세요:');
			if (title) {
				calendar.addEvent({
				title: title,
				start: info.dateStr,
				allDay: true
				});
			}
			},

			// 이벤트 클릭 → 수정
			eventClick: function (info) {
			const newTitle = prompt('수정할 제목을 입력하세요:', info.event.title);
			if (newTitle !== null) {
				info.event.setProp('title', newTitle);
			}
			}
		});

		calendar.render();
		});
	</script> 
	
	<script>
	document.addEventListener('DOMContentLoaded', function() {
	    var menuItems = document.querySelectorAll('.new .menu-1depth > li > button');
	    var dropdown = document.querySelector('.menu-drop');

	    menuItems.forEach(function(item) {
	        item.addEventListener('click', function(e) {
	            e.stopPropagation();
	            if (dropdown) {
	                var isVisible = dropdown.style.display === 'block';
	                dropdown.style.display = isVisible ? 'none' : 'block';
	                // 필요 시 버튼에 따라 .menu-drop 내용 동적으로 변경
	                // 예: dropdown.querySelector('.menu-title strong').textContent = this.textContent;
	            }
	        });
	    });

	    document.addEventListener('click', function() {
	        if (dropdown) {
	            dropdown.style.display = 'none';
	        }
	    });
	});
	</script>    



<script>
function setCookie(name, value, days) {
	  let expires = "";
	  if (days) {
	    const date = new Date();
	    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
	    expires = "; expires=" + date.toUTCString();
	  }

	  let cookie = name + "=" + encodeURIComponent(value) + expires + "; path=/";

	  // 현재 도메인이 gininet.org 하위인지 확인 후 도메인 설정
	  if (location.hostname.endsWith("gininet.org")) {
	    cookie += "; domain=.gininet.org";
	  }

	  document.cookie = cookie;
	}  

  // 쿠키 삭제
  function deleteCookie(name, domain, path) {
    let cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT;";
    cookie += path ? " path=" + path + ";" : " path=/;";
    if (domain) cookie += " domain=" + domain + ";";
    document.cookie = cookie;
  }

  // googtrans 쿠키 전체 삭제
  function deleteAllGoogtransCookies() {
    const paths = ['/', location.pathname];
    const domains = ['.gininet.org', 'gininet.org']; // 요청하신 도메인

    for (const domain of domains) {
      for (const path of paths) {
        deleteCookie('googtrans', domain, path);
      }
    }
    deleteCookie('googtrans'); // 기본 도메인 삭제
  }

  // 언어 변경 및 새로고침
  function translateLanguage(lang) {
    if (!lang) return;
    deleteAllGoogtransCookies();

    const value = '/en/' + lang;

    // 도메인 지정하여 쿠키 세팅
    setCookie('googtrans', value, 1, '.gininet.org');
    setCookie('googtrans', value, 1, 'gininet.org');

    // 페이지 새로고침 (조금 지연)
    setTimeout(function () {
      location.reload();
    }, 100);
  }

  // 번역 위젯 초기화
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      includedLanguages: 'en,ko,de,es,fr',
      layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google_translate_element');
  }

  // 언어 버튼 이벤트 연결
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.lang-option').forEach(function (el) {
      el.addEventListener('click', function (e) {
        e.preventDefault();
        const lang = this.getAttribute('data-lang');
        translateLanguage(lang);
      });
    });
  });
</script>

<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>  