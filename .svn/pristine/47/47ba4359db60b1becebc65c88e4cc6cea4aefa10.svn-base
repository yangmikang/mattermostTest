<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="apple-touch-icon" sizes="180x180" href="../../resources/img/guide/favicon_180.png">
	<link rel="icon" type="image/png" sizes="512x512" href="../../resources/img/guide/favicon_512.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="../../resources/img/guide/favicon_192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="../../resources/img/guide/favicon_32.png">
	<title>GINI - Global Innopolis Network Initiative</title>
	<link href="../../resources/css/swiper-bundle.min.css" type="text/css" rel="stylesheet" />
	<link href="../../resources/css/pattern_css.css" type="text/css" rel="stylesheet" />
	<link href="../../resources/css/output/p_common.css" type="text/css" rel="stylesheet" />
	<link href="../../resources/css/output/p_content.css" type="text/css" rel="stylesheet" />
	<link href="../../resources/css/output/p_layout.css" type="text/css" rel="stylesheet" />

	 <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css' rel='stylesheet' />
	<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
	<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/locales/ko.global.min.js"></script>

</head>

<style>
	#searchKeyword{
		border-radius:5px;
		padding:10px;
		margin-right:5px;
		height: 50px;
	}
	#content{
		    width: 80%;
    		margin: 0 auto;
			margin-bottom: 5%;
			margin-top: 2%;
	}
	 
	#btBox{
		 display: flex
;
   		 justify-content: flex-end;
   		 
   		 margin:10px;
	
	}
	.taxindate{
	    align-items: center;
		display: flex;
	}

	.topBox{
	
	    display: flex;
	    align-items: center;
	    justify-content: space-between;
	}
	
</style>
<body>
<div id="wrap">

		<div class="right ">
			<!-- <button type="button" class="btn-navi sch" title="통합검색 레이어" onclick="common.popupEvent('#popTotalSch');">통합검색</button> -->
		</div>
			<!-- //모바일 : 전체메뉴 -->
		<!-- //헤더 영역 -->

		<!-- 컨테이너 영역 -->
		<div id="container">
			<!-- breadcrumb -->
			<nav class="breadcrumb-wrap" aria-label="브레드크럼">
				<ol class="breadcrumb">
					<li class="home"><a href="#" class="txt">Home</a></li>
					<li><a href="#" class="txt">BOARD</a></li>
				</ol>
			</nav>
			<!-- breadcrumb -->

			<!-- 컨텐츠 영역 -->
			<div class="inner">
					<div class="topBox">
			<div class="taxindate">
				<input type="text"
					name="searchKeyword" id="searchKeyword"class="searchKeyword" placeholder="Enter keyword"
					value="">
				<div class="datebtn">
					<button type="button" id="search" class="search btn primary">Search</button>
				</div>
			
			</div>
					
			<div id="btBox">
					<button type="button" id="WtBt" class="btn primary"> <a href="/distep/board/boardPage.do">Write Post</a></button>
			</div>
		</div>
				 <!-- 행사 일정 캘린더 영역 끝 -->
				<!-- 검색 입력폼 -->
				 <!-- <div class="search-top-box">
					<div class="sch-form-wrap">
						<div class="sch-input">
							<input type="text" class="form-control" placeholder="검색어를 입력해주세요" title="검색어 입력">
							<button type="button" class="btn btn-ico ico-sch">
								<span class="sr-only">검색</span>
							</button>
						</div>
						<button type="button" class="btn btn-txt sm ico-sch1 ico-before">고급검색</button>
					</div>
					<div class="sch-filter-box">
						<div class="filter-form">
							<div>
								<label class="label" for="appl-sch-sel1">생애 주기</label>
								<select id="appl-sch-sel1" class="form-select md">
									<option value="">전체</option>
									<option value="">항목</option>
									<option value="">항목</option>
								</select>
							</div>
							<div>
								<label class="label" for="appl-sch-sel2">가구 상황</label>
								<select id="appl-sch-sel2" class="form-select md">
									<option value="">전체</option>
									<option value="">항목</option>
									<option value="">항목</option>
								</select>
							</div>
							<div>
								<label class="label" for="appl-sch-sel3">관심 주제</label>
								<select id="appl-sch-sel3" class="form-select md">
									<option value="">전체</option>
									<option value="">항목</option>
									<option value="">항목</option>
								</select>
							</div>
						</div>
						<dl class="filter-chip">
							<dt>선택된 필터 (<span class="num">2</span>)</dt>
							<dd>
								<button type="button" class="btn btn-ico ico-refresh sm-l">
									<span class="sr-only">새로고침</span>
								</button>
								<div class="chip-wrap">
									<span class="btn-chip-outline md">
										영유아
										<button type="button" class="btn-del">
											<span class="sr-only">삭제</span>
										</button>
									</span>
									<span class="btn-chip-outline md">
										필터값
										<button type="button" class="btn-del">
											<span class="sr-only">삭제</span>
										</button>
									</span>
									<span class="btn-chip-outline md">
										필터값
										<button type="button" class="btn-del">
											<span class="sr-only">삭제</span>
										</button>
									</span>
								</div>
							</dd>
						</dl>
					</div>
				</div>  -->
				<!-- //검색 입력폼 -->

				<!-- 검색 결과 : 리스트 상단 -->
				 <div class="search-list-top type1">
					<div class="sch-info" role="region" aria-live="polite">
						전체 <span class="keyword"></span>건
					</div>
					<!--
					 <ul class="sch-sort">
						<li class="li1 m-hide">
							<strong class="sort-label"><label for="search_result_count">목록 표시 개수</label></strong>
							<select class="sort-select" id="search_result_count">
								<option>10개</option>
								<option>9개</option>
							</select>
						</li>
						<li class="li2">
							<strong class="sort-label"><label for="sort">정렬기준</label></strong>
							<div class="w-sort-btn">
								<button type="button" class="active">관련도순</button>
								<button type="button">최신순</button>
								<button type="button">인기순</button>
							</div>
							<div class="m-sort-btn">
								<button type="button" class="btn btn-txt ico-filter"
								        onclick="common.popupEvent('#popFilterId')">
									<span class="span">필터</span>
									<span class="num">2</span>
								</button>
								<select class="sort-select" id="sort">
									<option>관련도순</option>
									<option>최신순</option>
									<option>인기순</option>
								</select>
							</div>
						</li>
					</ul> 
					-->
				</div> 
				<!-- //검색 결과 : 리스트 상단 -->

				<!-- 한달 전체 행사 리스트  -->
			<table class="table table-bordered sumTable">
						<thead class="sth">
							<!-- <tr>
								<th scope="col">Title</th>
								<th scope="col">Content</th>
								<th scope="col">Created Date</th>
								<th scope="col">Writer</th>
							</tr> -->
						</thead>
						<tbody class="stb">
						
						
						</table>



				<!-- //한달 전체 행사 리스트 -->

				<!-- paging : 웹 -->
					
				<div class="pagination w-page paging">
						<div class="row justify-content-center" id="divPagingArea">
					
						</div>
				</div>
				<!-- //paging : 웹 -->

				<!-- paging : 모바일 -->
				<div class="pagination m-page">
					<div class="page-navis">
						<a class="page-navi prev" href="#">이전</a>
						<a class="page-navi next" href="#">다음</a>
					</div>
					<div class="page-links">
						<a class="page-link" href="#">1</a>
						<span class="page-link link-dot"></span>
						<a class="page-link" href="#">7</a>
						<a class="page-link active" href="#">8</a>
						<a class="page-link" href="#">9</a>
						<span class="page-link link-dot"></span>
						<a class="page-link" href="#">120</a>
					</div>
				</div>
				<!-- //paging : 모바일 -->
			</div>
			<!-- //컨텐츠 영역 -->
		</div>
		<!-- //컨테이너 영역 -->

		<!-- 푸터 영역 -->
		<footer id="footer">
			<!-- <div class="foot-bg"></div> -->
			<div class="foot-quick">
				<div class="inner">
					<button type="button" class="link" title="연계기관 레이어"
							onclick="common.popupEvent('#popFootLink');">연계기관1</button>
					<button type="button" class="link" title="연계기관 레이어">연계기관2</button>
					<button type="button" class="link" title="연계기관 레이어">연계기관3</button>
					<button type="button" class="link" title="정부기관 레이어">정부기관</button>
				</div>
			</div>
			<div class="inner">
				<div class="f-cnt-wrap">
					<div class="f-cnt-box column">
						<div class="f-cnt top">
							<div class="f-logo">
								<img src="../../resources/img/pattern/layout/footer_logo.svg" class="logo-im" alt="지니">
							</div>
							<div class="link-sns">
								<a href="#" class="instagram" target="_blank"><span class="sr-only">인스타그램</span></a>
								<a href="#" class="youtube" target="_blank"><span class="sr-only">유튜브</span></a>
								<!-- <a href="#" class="twitter" target="_blank"><span class="sr-only">트위터</span></a> -->
								<a href="#" class="facebook" target="_blank"><span class="sr-only">페이스북</span></a>
								<!-- <a href="#" class="blog" target="_blank"><span class="sr-only">블로그</span></a> -->
							</div>
						</div>
						<div class="f-cnt bottom">
							<div class="f-info">
								<!-- <p class="info-addr">(12345) 00000 지니</p> -->
								<ul class="info-cs">
									<li><a href="tel:+82428650501"><strong class="strong">+82-42-865-0501</strong></a><span class="span">(평일 09시~18시)</span></li>
									<li><strong class="strong">+82-42-861-4309</strong><span class="span"></span></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="f-link">
						<div class="link-go">
							<a href="#" class="btn btn-txt sm ico-arr">menu 1</a>
							<a href="#" class="btn btn-txt sm ico-arr">menu 2</a>
							<a href="#" class="btn btn-txt sm ico-arr">menu 3</a>
						</div>
					</div>
				</div>
				<div class="f-btm">
					<div class="f-btm-text">
						<div class="f-menu">
							<a href="#" class="point">개인정보처리방침</a>
							<a href="#">저작권 정책</a>
							<!-- <a href="#">웹 접근성 품질인증 마크 획득</a> -->
						</div>
						<p class="f-copy">© 2025 National Health Insurance Service. All rights reserved.</p>
					</div>
				</div>
			</div>
			
		</footer>
		<!-- //푸터 영역 -->
	</div>

	<!-- 레이어 : 검색필터 -->
	<div class="popup-wrap" data-type="bottom" id="popFilterId">
		<div class=" popup-in">
			<div class="popup">
				<div class="popup-head">
					<h1 class="pop-tit">검색필터</h1>
					<button type="button" class="popup-close">
						<span class="sr-only">레이어 닫기</span>
					</button>
				</div>
				<div class="popup-body">
					<div class="pop-filter-top">
						<dl class="filter-dl">
							<dt>적용된 필터 (0)</dt>
							<dd>적용된 필터가 없습니다. 검색 필터를 통해 상세한 검색을 해보세요</dd>
						</dl>
					</div>
					<ul class="acco-list filter-list is-open">
						<li class="li">
							<div class="acco-head">
								<h4 class="tit"><label for="select1">생애 주기</label></h4>
								<button type="button" class="btn btn-ico acco-btn">
									<span class="sr-only">펼침</span>
								</button>
							</div>
							<div class="acco-body">
								<div class="acco-in">
									<select class="form-select md" id="select1">
										<option value="">전체</option>
									</select>
								</div>
							</div>
						</li>
						<li class="li">
							<div class="acco-head">
								<h4 class="tit"><label for="select2">가구 상황</label></h4>
								<button type="button" class="btn btn-ico acco-btn">
									<span class="sr-only">펼침</span>
								</button>
							</div>
							<div class="acco-body">
								<div class="acco-in">
									<select class="form-select md" id="select2">
										<option value="">전체</option>
									</select>
								</div>
							</div>
						</li>
						<li class="li">
							<div class="acco-head">
								<h4 class="tit"><label for="select3">관심 주제</label></h4>
								<button type="button" class="btn btn-ico acco-btn">
									<span class="sr-only">펼침</span>
								</button>
							</div>
							<div class="acco-body">
								<div class="acco-in">
									<select class="form-select md" id="select3">
										<option value="">전체</option>
									</select>
								</div>
							</div>
						</li>
					</ul>
				</div>
				<div class="popup-btm">
					<button type="button" class="btn xlg tertiary">모든 조건 삭제</button>
					<button type="button" class="btn xlg">적용하기</button>
				</div>
			</div>
		</div>
	</div>
	<!-- //레이어 : 검색필터 -->

	<!-- 스크립트 : 라이브러리 -->
	<script src="../../resources/js/pattern/jquery.min.js"></script>
	
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<!-- 스크립트 : 패턴 페이지 -->
	
	<script src="../../resources/js/pattern/ui-pattern-script.js"></script>
	

	<!-- 스크립트 : 컴포넌트 -->
	<script src="../../resources/js/component/ui-script.js"></script>
	<script>
		/* layer : 검색필터 */
		const $tag = document.querySelector(".pop-filter-top .tag-in");
		const $tagBtn = document.querySelector(".pop-filter-top #btn-toggle");
		if ($tagBtn) {
			$tagBtn.addEventListener("click", (e) => {
				if (!e.target.classList.contains("active")) {
					$tag.classList.add("is-open");
					e.target.classList.add("active");
				} else {
					$tag.classList.remove("is-open");
					e.target.classList.remove("active");
				}
			});
		}
	</script>

	<script>
	

	document.getElementById("search").addEventListener("click", function () {
		
		  const keyword = document.getElementById("searchKeyword").value;
			console.log("keyword",keyword)
		  changeSort(1, keyword); // 검색 시 1페이지부터 다시 시작
		});


	changeSort()

	function changeSort(currentPage = 1, keyword) {
	  let data = { currentPage: currentPage, keyword:keyword };

	  axios.post('/distep/board/listAjax.do', data)
	    .then(function (res) {
	      let content = document.querySelector(".stb");
	      let Listdata = res.data.content;
	      let tby = '';
	      let tby2 = '';
			let getTotal = res.data.total
			console.log(getTotal)
			
			
			let totalkeyword = document.querySelector(".keyword")
			totalkeyword.innerText = getTotal
	      for (let list of Listdata) {
	    	  tby += `
	          <tr>
	            <th><a href="/distep/board/detail.do?boardCode=\${list.boardCode}">\${list.title}</a></th>
	            <td>\${list.content.length > 90 ? list.content.slice(0, 90) + '...' : list.content}</td>
	            <td>\${list.regDate}</td>
	            <td>\${list.userId}</td>
	          </tr>`;
	          
	          tby2 += `
	          
	        		<ul class="search-list type1">
					<li class="li">
						<div class="in">
							<!-- 행사 진행상태 -->
							<div class="card-top">
								<span class="krds-badge bg3">Ongoing</span>
								<span class="krds-badge">Upcoming</span>
								<span class="krds-badge bg2">Completed</span>
							</div>
							<!-- //행사 진행상태-->
							<div class="card-body">
								<a  href="/distep/board/detail.do?boardCode=\${list.boardCode}"class="c-text">
									<p class="c-tit"><span class="span">\${list.title}</span></p>
									<p class="c-txt">
									\${list.content.length > 90 ? list.content.slice(0, 90) + '...' : list.content}
									</p>
									<p class="c-date">
										<strong class="key">Created Date</strong>
										<span class="value">\${list.regDate}</span>
									</p>
								</a>
								<div class="c-btn">
									<a href="/distep/board/detail.do?boardCode=\${list.boardCode}" class="btn md secondary" title="자세히 보기">View Details</a>
								</div>
							</div>
							<!-- 해시태그 키워드 영역 시작-->
							<!--<div class="card-btm">
								<span class="tag">HashTag</span>
								<span class="tag">HashTag</span>
							</div>-->
							<!-- //해시태그 키워드 영역 -->
							<!-- <div class="card-btn">
								<button type="button" class="btn sm btn-txt ico-down ico-before" title="첨부파일">	Attachment</button>
								<button type="button" class="btn sm btn-txt ico-go ico-before" title="하이퍼링크">하이퍼링크</button>
							</div> -->
						</div>
					</li>
				</ul>
	          `;
	          
	      }
	      content.innerHTML = tby2;

	      document.querySelector("#divPagingArea").innerHTML = res.data.pagingArea;
	      bindPagingEvents(); // ✅ 새 페이징에 이벤트 다시 바인딩
	    });
	}
	function bindPagingEvents() {
		  document.querySelectorAll(".clsPagingArea").forEach(function (el) {
		    el.addEventListener("click", function (e) {
		      e.preventDefault();
		      const currentPage = parseInt(this.dataset.currentPage);
		      const keyword = this.dataset.keyword || '';
		      console.log(":page",currentPage)
		      changeSort(currentPage, keyword);
		    });
		  });
		}

    document.addEventListener('DOMContentLoaded', function () {
		const calendarEl = document.getElementById('calendar');

		const calendar = new FullCalendar.Calendar(calendarEl, {
			locale: 'en',               // 한국어
			initialView: 'dayGridMonth',
			selectable: true,          // 드래그 또는 클릭으로 선택 허용
			editable: true,            // 드래그로 이동/수정 가능
			headerToolbar: {
			// left: 'timeGridDay', //dayGridMonth,timeGridWeek
			left: 'title',
			right: 'prev,today,next'
			},

			// 날짜 클릭 → 새 이벤트 생성
			dateClick: function (info) {
			const title = prompt('일정 제목을 입력하세요:');
			if (title) {
				calendar.addEvent({
				title: title,
				start: info.dateStr,
				allDay: true
				});
			}
			},

			// 이벤트 클릭 → 수정
			eventClick: function (info) {
			const newTitle = prompt('수정할 제목을 입력하세요:', info.event.title);
			if (newTitle !== null) {
				info.event.setProp('title', newTitle);
			}
			}
		});

		calendar.render();
		});
	</script>

</body>
</html>