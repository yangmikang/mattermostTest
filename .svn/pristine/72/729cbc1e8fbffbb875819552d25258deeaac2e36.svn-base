<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
   response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1
   response.setHeader("Pragma", "no-cache"); // HTTP 1.0
   response.setDateHeader("Expires", 0); // Proxies
%>
<%@ include file="/WEB-INF/jsp/cmmn/tagLib.jsp" %>
<!-- 헤더 영역 -->
		<header id="header">
			<!-- 헤더 컨텐츠 영역  -->
			<div class="header-in">
				<!-- 헤더 상단 기타메뉴 -->
				<div class="head-body">
					<div class="inner">
						<div class="head-in">
							<h1 class="logo">
								<a href="${pageContext.request.contextPath}/index.do">
									<img src="${pageContext.request.contextPath}/img/pattern/layout/head_logo.svg" class="logo-im" alt="Global Innopolis Network Initiative">
									<!-- <img src="${pageContext.request.contextPath}/img/pattern/layout/head_logo_slogan.svg" class="logo-slogan" alt="다시 대한민국! 새로운 국민의 나라"> -->
								</a>
							</h1>
							
							<!-- 웹 : 메뉴 영역 -->
							<nav class="krds-gnb new">
								<div class="inner">
									<ul class="gnb-menu menu-1depth">
										<li>  
											<button>About GINI</button>
										</li>
										<li>
											<button>Network</button>
										</li>
										<li>
											<button>Programs</button>
										</li>
										<li>
											<button>News</button>
										</li>
										<li>
											<button>Members Area</button>
										</li>
									</ul>
									<!-- 한번에 보이는 2뎁스 -->
									<div class="menu-drop">
										<div class="inner">
											<div class="menu-title">
												<!-- <strong class="ico-gini">About GINI</strong> -->
											</div>
											<div class="menu-cont">
												<div class="menu-2depth-box">
													<ul class="menu-2depth">
														<div class="depth-order-1">
															<c:forEach items="${menuList }" var="list"> 
																<c:if test="${list.board_order_group == '1' }">
																	<li onclick="location.href='${pageContext.request.contextPath}${list.board_link}'"><a>${list.board_master_name }</a></li>
																</c:if>
															</c:forEach>
														</div>
														<div class="depth-order-2">
															<c:forEach items="${menuList }" var="list">
																<c:if test="${list.board_order_group == '2' }">
																	<li onclick="location.href='${pageContext.request.contextPath}${list.board_link}'"><a>${list.board_master_name }</a></li>
																</c:if>
															</c:forEach>	
														</div>
														<div class="depth-order-3">
															<c:forEach items="${menuList }" var="list">
																<c:if test="${list.board_order_group == '3' }">
																	<li onclick="location.href='${pageContext.request.contextPath}${list.board_link}'"><a>${list.board_master_name }</a></li>
																</c:if>
															</c:forEach>	
														</div>
														<div class="depth-order-4">
															<c:forEach items="${menuList }" var="list">
																<c:if test="${list.board_order_group == '4' }">
																	<li onclick="location.href='${pageContext.request.contextPath}${list.board_link}'"><a>${list.board_master_name }</a></li>
																</c:if>
															</c:forEach>	
														</div>
														<div class="depth-order-5">
															<c:forEach items="${menuList }" var="list">
																<c:if test="${list.board_order_group == '5' }">
																	<li onclick="location.href='${pageContext.request.contextPath}${list.board_link}'"><a>${list.board_master_name }</a></li>
																</c:if>
															</c:forEach>  
														</div>
													</ul>
												</div>
											</div>
										</div>
									</div>									
									<!-- //한번에 보이는 2뎁스 -->
								</div>
							</nav>
							<!-- //웹 : 메뉴 영역 -->
							<div class="right ">
								<div class="krds-drop-wrap my-drop drop-language">
								  <button type="button" class="btn-navi language drop-btn">Language<span class="sr-only">열기</span></button>
								  <div class="drop-menu">
								    <div class="drop-in">
								    	<div class="drop-top-info">
											<p class="drop-info">Translate this page using your browser.</p>
										</div>
									    <ul class="drop-list">
									      <li><a href="#" data-lang="en" class="lang-option item-ico ico-eng">English</a></li>
									      <li><a href="#" data-lang="ko" class="lang-option item-ico ico-kor">Korean</a></li>
									      <li><a href="#" data-lang="de" class="lang-option item-ico ico-de">German</a></li>
									      <li><a href="#" data-lang="es" class="lang-option item-ico ico-es">Spanish</a></li>
									      <li><a href="#" data-lang="fr" class="lang-option item-ico ico-fr">French</a></li>
									    </ul>
								    </div>
								  </div>
								</div>
								<div id="google_translate_element" style="position:absolute; left:-9999px;"></div>
								<c:if test="${empty sessionScope.loggedInUser}">  
								<a href="#" class="btn-navi login" onclick="location.href='${pageContext.request.contextPath}/login.do'">Login</a>
								<button type="button" class="btn-navi join" onclick="location.href='${pageContext.request.contextPath}/userRegister.do'">Join</button>
								</c:if>
								<c:if test="${not empty sessionScope.loggedInUser}">
									<a href="#" class="btn-navi logout" onclick="location.href='${pageContext.request.contextPath}/logout.do'">Logout</a>
									<c:if test="${sessionScope.loggedInUser.role ne 'A'}">
										<a href="#" class="btn-navi my" onclick="location.href='${pageContext.request.contextPath}/editUser.do'">MyPage</a>
									</c:if>
								</c:if>
								<c:if test="${sessionScope.loggedInUser.role eq 'A'}">
									<div class="krds-drop-wrap my-drop">
										<button type="button" class="btn-navi admin drop-btn">Admin<span class="sr-only">열기</span></button>
										<div class="drop-menu">
											<div class="drop-in">
												<div class="drop-top-info">
													<p class="my-name">${sessionScope.loggedInUser.username}</p>
												</div>
												<ul class="drop-list">
													<li><a href="#" class="item-link ico-setting" onclick="location.href='${pageContext.request.contextPath}/editUser.do'"> My Page</a></li>
													<li><a href="#" class="item-link ico-setting" onclick="location.href='${pageContext.request.contextPath}/admin.do'"> Manage Users</a></li>
													<li><a href="#" class="item-link ico-setting" onclick="location.href='${pageContext.request.contextPath}/adminBoard.do'"> Permission Settings</a></li>
												</ul>
											</div>
										</div>
									</div>
								</c:if>
								<button type="button" class="btn-navi all" aria-controls="mobile-nav" aria-expanded="">전체메뉴</button>
							</div>
						</div>
					</div>
				</div>
				<!-- //헤더 상단 기타메뉴 -->
			</div>
			<!-- //헤더 컨텐츠 영역  -->
			<!-- 모바일 : 전체메뉴 -->
			<nav id="mobile-nav" class="krds-gnb-mobile">
				<div class="gnb-wrap">
					<!-- gnb-header -->
					<div class="gnb-header">
						<!-- gnb-utils -->
						<div class="gnb-utils">
							<ul class="etc-ul">
								<li><button type="button" class="krds-btn xsmall text"></button></li>
								<button type="button" class="krds-btn medium icon" id="close-nav">
									<span class="sr-only">close</span>
									<i class="svg-icon ico-popup-close"></i>
								</button>
							</ul>
						</div>
						<!-- //gnb-utils -->
						<!-- gnb-login -->
						<div class="gnb-login-box">
							<span>Welcome, <span class="user">${sessionScope.loggedInUser.username}</span></span>
							<div class="gnb-login">
								<c:if test="${empty sessionScope.loggedInUser}">  
									<a href="#" class="krds-btn login" onclick="location.href='${pageContext.request.contextPath}/login.do'"><i class="svg-icon ico-log"></i> Login</a>
									<button type="button" class="krds-btn join" onclick="location.href='${pageContext.request.contextPath}/userRegister.do'"><i class="svg-icon ico-join"></i> Join</button>
								</c:if>
								<c:if test="${not empty sessionScope.loggedInUser}">
									<a href="#" class="krds-btn logout" onclick="location.href='${pageContext.request.contextPath}/logout.do'"><i class="svg-icon ico-logout"></i> Logout</a>
									<c:if test="${sessionScope.loggedInUser.role ne 'A'}">
										<a href="#" class="krds-btn my" onclick="location.href='${pageContext.request.contextPath}/editUser.do'"><i class="svg-icon ico-mypage"></i> MyPage</a>
									</c:if>
								</c:if>
							</div>
						</div>
						<!-- //gnb-login -->
						<c:if test="${sessionScope.loggedInUser.role eq 'A'}">
							<div class="gnb-service-menu drop-list">
								<a href="#" class="krds-btn icon" onclick="location.href='${pageContext.request.contextPath}/editUser.do'"><i class="svg-icon ico-setting"></i> My Page</a>
								<a href="#" class="krds-btn icon" onclick="location.href='${pageContext.request.contextPath}/admin.do'"><i class="svg-icon ico-setting"></i> Manage Users</a>
								<a href="#" class="krds-btn icon" onclick="location.href='${pageContext.request.contextPath}/adminBoard.do'"><i class="svg-icon ico-setting"></i> Permission Settings</a>
							</div>
						</c:if>
					</div>
					<!-- mobile gnb-body -->
					<div class="gnb-body">
						<!-- gnb-menu -->
						<div class="gnb-menu">
							<div class="menu-wrap">
								<ul>
									<li>
										<a href="#mGnb-anchor1" class="gnb-main-trigger active"><h2>About GINI</h2></a>
									</li>
									<li>
										<a href="#mGnb-anchor2" class="gnb-main-trigger"><h2>Network</h2></a>
									</li>
									<li>
										<a href="#mGnb-anchor3" class="gnb-main-trigger"><h2>Programs</h2></a>
									</li>
									<li>
										<a href="#mGnb-anchor4" class="gnb-main-trigger"><h2>News</h2></a>
									</li>
									<li>
										<a href="#mGnb-anchor5" class="gnb-main-trigger"><h2>Members Area</h2></a>
									</li>
								</ul>
							</div>
							<div class="submenu-wrap">
								<div class="gnb-sub-list" id="mGnb-anchor1">
									<h3 class="sub-title">About GINI</h3>
									<ul>
										<c:forEach items="${menuList }" var="list"> 
											<c:if test="${list.board_order_group == '1' }">
												<li onclick="location.href='${pageContext.request.contextPath}${list.board_link}'"><a href="#" class="gnb-sub-trigger">${list.board_master_name }</a></li>
											</c:if>
										</c:forEach>									
									</ul>
								</div>
								<div class="gnb-sub-list" id="mGnb-anchor2">
									<h3 class="sub-title">Network</h3>
									<ul>										
										<c:forEach items="${menuList }" var="list">
											<c:if test="${list.board_order_group == '2' }">
												<li onclick="location.href='${pageContext.request.contextPath}${list.board_link}'"><a href="#" class="gnb-sub-trigger">${list.board_master_name }</a></li>
											</c:if>
										</c:forEach>
									</ul>
								</div>
								<div class="gnb-sub-list" id="mGnb-anchor3">
									<h3 class="sub-title">Network</h3>
									<ul>										
										<c:forEach items="${menuList }" var="list">
											<c:if test="${list.board_order_group == '3' }">
												<li onclick="location.href='${pageContext.request.contextPath}${list.board_link}'"><a href="#" class="gnb-sub-trigger">${list.board_master_name }</a></li>
											</c:if>
										</c:forEach>
									</ul>
								</div>
								<div class="gnb-sub-list" id="mGnb-anchor4">
									<h3 class="sub-title">Network</h3>
									<ul>										
										<c:forEach items="${menuList }" var="list">
											<c:if test="${list.board_order_group == '4' }">
												<li onclick="location.href='${pageContext.request.contextPath}${list.board_link}'"><a href="#" class="gnb-sub-trigger">${list.board_master_name }</a></li>
											</c:if>
										</c:forEach>
									</ul>
								</div>
								<div class="gnb-sub-list" id="mGnb-anchor5">
									<h3 class="sub-title">Network</h3>
									<ul>										
										<c:forEach items="${menuList }" var="list">
											<c:if test="${list.board_order_group == '5' }">
												<li onclick="location.href='${pageContext.request.contextPath}${list.board_link}'"><a href="#" class="gnb-sub-trigger">${list.board_master_name }</a></li>
											</c:if>
										</c:forEach>  
									</ul>
								</div>
							</div>
						</div>
						<!-- //mobile gnb-menu -->
						<!-- gnb-bottom -->
						<div class="gnb-bottom">
							<a href="#" class="krds-btn medium text">ㅇㅇㅇㅇ</a>
							<a href="#" class="krds-btn medium text" target="_blank" title="새 창 열기"> ㅇㅇㅇㅇㅇ <i class="svg-icon ico-go"></i> </a>
						</div>
						<!-- //gnb-bottom -->
					</div>
					<!-- //mobile gnb-body -->
				</div>
			</nav>
			<!-- //모바일 : 전체메뉴 -->
		</header>
		<!-- //헤더 영역 -->
<script>
		/* layer : 검색필터 */
		const $tag = document.querySelector(".pop-filter-top .tag-in");
		const $tagBtn = document.querySelector(".pop-filter-top #btn-toggle");
		if ($tagBtn) {
			$tagBtn.addEventListener("click", (e) => {
				if (!e.target.classList.contains("active")) {
					$tag.classList.add("is-open");
					e.target.classList.add("active");
				} else {
					$tag.classList.remove("is-open");
					e.target.classList.remove("active");
				}
			});
		}
	</script>

	<script>
    document.addEventListener('DOMContentLoaded', function () {
		const calendarEl = document.getElementById('calendar');

		const calendar = new FullCalendar.Calendar(calendarEl, {
			locale: 'en',               // 한국어
			initialView: 'dayGridMonth',
			selectable: true,          // 드래그 또는 클릭으로 선택 허용
			editable: true,            // 드래그로 이동/수정 가능
			headerToolbar: {
			// left: 'timeGridDay', //dayGridMonth,timeGridWeek
			left: 'title',
			right: 'prev,today,next'
			},

			// 날짜 클릭 → 새 이벤트 생성
			dateClick: function (info) {
			const title = prompt('일정 제목을 입력하세요:');
			if (title) {
				calendar.addEvent({
				title: title,
				start: info.dateStr,
				allDay: true
				});
			}
			},

			// 이벤트 클릭 → 수정
			eventClick: function (info) {
			const newTitle = prompt('수정할 제목을 입력하세요:', info.event.title);
			if (newTitle !== null) {
				info.event.setProp('title', newTitle);
			}
			}
		});

		calendar.render();
		});
	</script> 
	
	<script>
	document.addEventListener('DOMContentLoaded', function() {
	    var menuItems = document.querySelectorAll('.new .menu-1depth > li > button');
	    var dropdown = document.querySelector('.menu-drop');

	    menuItems.forEach(function(item) {
	        item.addEventListener('click', function(e) {
	            e.stopPropagation();
	            if (dropdown) {
	                var isVisible = dropdown.style.display === 'block';
	                dropdown.style.display = isVisible ? 'none' : 'block';
	                // 필요 시 버튼에 따라 .menu-drop 내용 동적으로 변경
	                // 예: dropdown.querySelector('.menu-title strong').textContent = this.textContent;
	            }
	        });
	    });

	    document.addEventListener('click', function() {
	        if (dropdown) {
	            dropdown.style.display = 'none';
	        }
	    });
	});
	</script>    



<script>
function setCookie(name, value, days) {
	  let expires = "";
	  if (days) {
	    const date = new Date();
	    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
	    expires = "; expires=" + date.toUTCString();
	  }

	  let cookie = name + "=" + encodeURIComponent(value) + expires + "; path=/";

	  // 현재 도메인이 gininet.org 하위인지 확인 후 도메인 설정
	  if (location.hostname.endsWith("gininet.org")) {
	    cookie += "; domain=.gininet.org";
	  }

	  document.cookie = cookie;
	}  

  // 쿠키 삭제
  function deleteCookie(name, domain, path) {
    let cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT;";
    cookie += path ? " path=" + path + ";" : " path=/;";
    if (domain) cookie += " domain=" + domain + ";";
    document.cookie = cookie;
  }

  // googtrans 쿠키 전체 삭제
  function deleteAllGoogtransCookies() {
    const paths = ['/', location.pathname];
    const domains = ['.gininet.org', 'gininet.org']; // 요청하신 도메인

    for (const domain of domains) {
      for (const path of paths) {
        deleteCookie('googtrans', domain, path);
      }
    }
    deleteCookie('googtrans'); // 기본 도메인 삭제
  }

  // 언어 변경 및 새로고침
  function translateLanguage(lang) {
    if (!lang) return;
    deleteAllGoogtransCookies();

    const value = '/en/' + lang;

    // 도메인 지정하여 쿠키 세팅
    setCookie('googtrans', value, 1, '.gininet.org');
    setCookie('googtrans', value, 1, 'gininet.org');

    // 페이지 새로고침 (조금 지연)
    setTimeout(function () {
      location.reload();
    }, 100);
  }

  // 번역 위젯 초기화
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      includedLanguages: 'en,ko,de,es,fr',
      layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google_translate_element');
  }

  // 언어 버튼 이벤트 연결
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.lang-option').forEach(function (el) {
      el.addEventListener('click', function (e) {
        e.preventDefault();
        const lang = this.getAttribute('data-lang');
        translateLanguage(lang);
      });
    });
  });
</script>
<script>
	document.querySelector('.btn-navi.all').addEventListener('click', () => {
	  const nav = document.querySelector('#mobile-nav');
	  nav.classList.toggle('is-open');
	  nav.setAttribute('aria-hidden', nav.classList.contains('is-open') ? 'false' : 'true');
	});

	document.querySelector('#close-nav').addEventListener('click', () => {
	  const nav = document.querySelector('#mobile-nav');
	  nav.classList.remove('is-open');
	  nav.setAttribute('aria-hidden', 'true');
	});
</script>
<script>
function forceGnbBodyHeight() {
	  const gnbBody = document.querySelector('#mobile-nav .gnb-body');
	  if (!gnbBody) {
	    console.log('gnb-body not found');
	    return 0;
	  }
	  // 리플로우 강제
	  gnbBody.offsetHeight;
	  // 높이 계산
	  const height = gnbBody.clientHeight;
	  console.log('Forced gnb-body height:', height);
	  return height;
	}

	// 모달 열릴 때 높이 계산
	document.querySelector('.btn-navi.all').addEventListener('click', () => {
	  setTimeout(() => {
	    forceGnbBodyHeight();
	  }, 100); // 렌더링 대기
	});
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>  