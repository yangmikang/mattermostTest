<%@ page language="java" contentType="text/html; charset=EUC-KR"
    pageEncoding="EUC-KR"%>
<!DOCTYPE html>
<html>
<script>
function validatePasswordForm() {
    const pw = document.getElementById("newPassword").value;
    const cpw = document.getElementById("confirmNewPassword").value;

    if (pw.length < 8 || pw.length > 20) {
        alert("Password must be 8-20 characters.");
        return false;
    }

    const pwRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{8,}$/;
    if (!pwRegex.test(pw)) {
        alert("Password must include letters and numbers.");
        return false;
    }

    if (pw !== cpw) {
        alert("Passwords do not match.");
        return false;
    }

    return true;
}
</script>
<body>
<div class="inner">
	<div class="login-form-area">
		<div class="login-wrap">
			<div class="conts-area">
				<fieldset>
					<legend>Edit User</legend>
						<form action="${pageContext.request.contextPath}/changePassword.do" method="post" onsubmit="return validatePasswordForm();">
						    <div class="form-group">
						        <label for="currentPassword">Current Password</label>
						        <input type="password" name="currentPassword" id="currentPassword" class="form-control" required />
						    </div>
						
						    <div class="form-group">
						        <label for="newPassword">New Password</label>
						        <input type="password" name="newPassword" id="newPassword" class="form-control" required />
						    </div>
						
						    <div class="form-group">
						        <label for="confirmNewPassword">Confirm New Password</label>
						        <input type="password" name="confirmNewPassword" id="confirmNewPassword" class="form-control" required />
						        <span id="pwMatchMsg"></span>
						    </div>
						
						    <button type="submit" class="btn primary">Change Password</button>
						</form>
					</fieldset>
				</div>
			</div>
		</div>
	</div>
	<!-- //ÄÁÅÙÃ÷ ¿µ¿ª -->

</body>
</html>